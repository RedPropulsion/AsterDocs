
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Red Docs! Documentazione per HW e SW dei progetti sviluppati da Red Propulsion.">
      
      
        <meta name="author" content="Red Propulsion">
      
      
        <link rel="canonical" href="https://docs.redpropulsion.it/hw/peripheral/addressable-led/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Addressable led(s) - Red Propulsion Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Addressable led(s) - Red Propulsion Documentation" >
      
        <meta  property="og:description"  content="Red Docs! Documentazione per HW e SW dei progetti sviluppati da Red Propulsion." >
      
        <meta  property="og:image"  content="https://docs.redpropulsion.it/assets/images/social/hw/peripheral/addressable-led.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.redpropulsion.it/hw/peripheral/addressable-led/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Addressable led(s) - Red Propulsion Documentation" >
      
        <meta  name="twitter:description"  content="Red Docs! Documentazione per HW e SW dei progetti sviluppati da Red Propulsion." >
      
        <meta  name="twitter:image"  content="https://docs.redpropulsion.it/assets/images/social/hw/peripheral/addressable-led.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#addressable-leds" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Red Propulsion Documentation" class="md-header__button md-logo" aria-label="Red Propulsion Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Red Propulsion Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Addressable led(s)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/redpropulsion/AsterCPP/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    redpropulsion/AsterCPP/
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api/index.md" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../" class="md-tabs__link">
          
  
  
  Hardware

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../runner/" class="md-tabs__link">
          
  
  
  Runner

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../guida/index.md" class="md-tabs__link">
          
  
  
  Guida

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Red Propulsion Documentation" class="md-nav__button md-logo" aria-label="Red Propulsion Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Red Propulsion Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/redpropulsion/AsterCPP/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    redpropulsion/AsterCPP/
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hardware
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hardware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Asterics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Asterics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asterics.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    None
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asterics/pwr.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PWR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asterics/mcu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCU
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asterics/sensr.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SENSR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asterics/telem.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TELEM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Obelics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Obelics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../obelics.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    None
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../obelics/funzioni_disponibili.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funzioni disponibili
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Runner
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Runner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../runner/config_runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DocsRunner
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guida
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Guida
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guida/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    None
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guida/docs-guidelines.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linee guida
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentazione-da-pdf" class="md-nav__link">
    <span class="md-ellipsis">
      Documentazione da PDF:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#come-controllare-i-neopixel" class="md-nav__link">
    <span class="md-ellipsis">
      Come controllare i neopixel?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Come controllare i neopixel?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fisicamente-cosa-accade" class="md-nav__link">
    <span class="md-ellipsis">
      Fisicamente cosa accade?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#come-utilizzare-il-timer-e-il-dma-per-inviare" class="md-nav__link">
    <span class="md-ellipsis">
      Come utilizzare il timer (e il DMA) per inviare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#come-configurare-il-timer" class="md-nav__link">
    <span class="md-ellipsis">
      Come configurare il timer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Come configurare il timer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calcolo-dellarr" class="md-nav__link">
    <span class="md-ellipsis">
      Calcolo dell'ARR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calcolo-dutycycle-bit" class="md-nav__link">
    <span class="md-ellipsis">
      Calcolo DutyCycle bit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementazione-codice" class="md-nav__link">
    <span class="md-ellipsis">
      Implementazione Codice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ws2812b" class="md-nav__link">
    <span class="md-ellipsis">
      WS2812b
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teoria-sui-led-indirizzabili" class="md-nav__link">
    <span class="md-ellipsis">
      Teoria sui led indirizzabili
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#come-configurare-il-progetto-per-avere-i-led-funzionanti" class="md-nav__link">
    <span class="md-ellipsis">
      Come configurare il progetto per avere i led funzionanti:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Come configurare il progetto per avere i led funzionanti:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#impostare-il-timer" class="md-nav__link">
    <span class="md-ellipsis">
      Impostare il timer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assegnare-i-valori-corretti-ai-bit" class="md-nav__link">
    <span class="md-ellipsis">
      Assegnare i valori corretti ai bit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="addressable-leds">Addressable led(s)</h1>
<h2 id="documentazione-da-pdf">Documentazione da PDF:</h2>
<p><img alt="Dettaglio dello schematico di alto livello" src="../dettaglio-schema-neopixel.png" />
<img alt="Parte dello schema elettrico che effettivamente contiene i led" src="../schematico-neopixel.png" /></p>
<p>Abbiamo a disposizione 13 LED disposti lungo l'esterno del pcb di <a href="../../asterics/mcu/">asterics-MCU</a>. Sono controllati attravero il pin <strong>PB9</strong> del microcontrollore. Hanno a disposizione il timer 17 e il timer 4 per il pilotaggio.
Abbiamo inoltre a disposizione una striscia LED lungo il diametro della fusoliera. Questi sono controllati attraverso il <strong>PB8</strong>.</p>
<p>Per risparmiare energia quando i led sono spenti, sulla MCU è presente un mosfet per abilitare la rail di alimentazione <strong>PF6</strong>, mentre nel <a href="../../asterics/ring/">RING</a> l'alimentazione viene abilitata da un regolatore su <a href="../asterics/pwr.md">PWR</a> attraverso il pin <strong>PF5</strong>.</p>
<h2 id="come-controllare-i-neopixel">Come controllare i neopixel?</h2>
<p>Questa tipologia di led indirizzabile sfrutta un protocollo "proprietario" che codifica gli stati logici di <code>1</code> e <code>0</code> modulando l'ampiezza di un'onda quadra, cioè con un PWM.
Per questo motivo possiamo utilizzare la funzione dei timer dell'stm per generare gli impulsi di periodo e ampiezza appropiati.
I led comunicano ad una velocità fissata di <span class="arithmatex">\(800\text{kHz}\)</span>, questo vuol dire che ogni <em>bit</em> viene trasmesso ogni <span class="arithmatex">\(1.25\mu s\)</span>.</p>
<h3 id="fisicamente-cosa-accade">Fisicamente cosa accade?</h3>
<p>I neopixel che abbiamo montato sono pensati per lavorare a 5V, ma possono tranquillamente lavorare con un'alimentazione a 3.3V, nel nostro caso gli forniamo 5V direttamente dal rail principale. Logicamente li facciamo lavorare con un segnale a 3.3V.
Come si nota dalla figura presa dallo schema elettrico, i singoli <em>PIXEL</em>, ovvero i led fisicamente montati sul PCB, sono collegati a cascata: l'uscita del primo è connessa con l'ingresso del secondo e così via.
Internamente ciascun <em>pixel</em>, è composto da 3 led: uno per ogni componente Rosso, Verde, Blu. </p>
<p>Ciascun LED (ovvero uno dei 3 di ogni pixel) ha una risoluzione di 8bit. Questo vuol dire che per indicare il colore di un <em>pixel</em> avremo bisogno di 24bit che dovranno essere inviati uno di seguito all'altro con l'ordine dato dalla documentazione dei led:
<img alt="alt text" src="../ordine-data-neopixel.png" />. Per impostare il colore sul secondo <em>pixel</em> della serie si continua a trasmettere. Nella logica interna del pixel vengono utilizzati i primi 24bit che riceve (e non li ritrasmette in uscita) mentre dal 25-esimo in poi vengono riamplificati e mandati al pixel successivo.</p>
<p>Avendo a disposizione 13 pixel, ognuno dei quali ha bisogno di 3 byte per indicare il colore, per immagazzinare l'informazione di ciascun pixel avremo bisogno di <span class="arithmatex">\(13\times 3=39\text {byte}\)</span> + 50byte in coda tutti da 0 per indicare che intendiamo resettare la comunicazione e ripartire dal pixel 0.
Per semplicità supponiamo di dover allocare un buffer da 100byte.</p>
<h3 id="come-utilizzare-il-timer-e-il-dma-per-inviare">Come utilizzare il timer (e il DMA) per inviare</h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>(tralasciamo inizialmente i discorsi operativi su come impostare la temporizzazione)</p>
<p>Abbiamo detto che i pixel comunicano con il duty cycle di un segnale pwm. Sappiamo che il periodo di questo segnale deve essere <span class="arithmatex">\(1.25\mu s\)</span>. Abilitiamo il timer corretto per i pin che vogliamo usare, abilitiamo la funzione "pwm generation chx". Nel menù dei parametri impostiamo l'ARR (Auto Reload Register) in modo che la frequenza di lavoro sia <span class="arithmatex">\(800 kHz\)</span>, mi segno anche questo valore perchè sarà utile tra poco.</p>
<p>Adesso vado nella sezione DMA e abilito una richiesta per l'aggiornamento del DMA al canale appena abilitato. La direzione deve essere da memoria a periferica e la priorità è da vedere. <img alt="alt text" src="../neopixel-dma.png" />
Un'altro parametro da considerare è il "mode" ovvero se considerare il buffer dei pixel come circolare o normale. La differenza dovrebbe essere che nel caso del buffer circolare il dma non si ferma automaticamente (ma non prendete queste parole per vero, se lo testate correggetemi grazie). Impostare anche l'incremento di indirizzo nella memoria. La larghezza delle parole non è importante.</p>
<div class="admonition tip">
<p class="admonition-title">Riassuntino</p>
</div>
<ul>
<li>Chiamiamo tutti i dispositivi connessi <strong>pixel</strong>, ciascun pixel è composto da 3 led.</li>
<li>Per indicare il colore da mostrare su ciascun pixel abbiamo bisogno di 24 bit: 3 parole da 1 byte ordinate GRB con primo bit MSB</li>
<li>Per inviare ciascun bit utilizziamo un segnale PWM con dyty cycle specifico.</li>
<li>Dobbiamo inviare di seguito ciascun bit, se non inviamo alcun dato e lasciamo il "filo" basso per <span class="arithmatex">\(t&gt;280\mu s\)</span> la comunicazione si resetta e possiamo reimpostare il primo pixel.</li>
<li>I pixel lavorano come degli shift register, ma al contrario: i primi 24 bit vanno al primo pixel, dal 25esimo al 49esimo al secondo e così via.</li>
<li>Per generare il segnale PWM a duty cycle utilizziamo una periferica timer del microcontrollore in combinazione al DMA per alleggerire il carico sulla logica di controllo</li>
</ul>
<p>Per semplificare la comunicazione con i led, possiamo utilizzare il DMA: configuriamo la periferica timer in modo che utilizzi un canale del dma in modo che ogni volta che ha finito di trasmettere il singolo bit, il dma aggiorni il valore del registro <em>pulse</em> con il valore successivo. \
Per fare questo abbiamo bisogno di 2 cose:
1. un buffer abbastanza capiente per le informazioni dei led
   !!! note
   è possibile anche usare un mezzo buffer e usare il callback corrispondente per risparmiare memoria</p>
<ol>
<li>implementare da qualche parte il Callback del TIM PWM PulseFinishedCallback</li>
<li>Implementare un metodo che faccia partire lo stream del DMA per il timer e il canale corretto</li>
</ol>
<p>A questo punto possiamo implementare le funzioni che aggiornano/impostano i colori dei led a seconda dell'operazione da effettuare.</p>
<h2 id="come-configurare-il-timer">Come configurare il timer</h2>
<p>Per la teoria generale su come funzioni / cosa sia / cosa faccia il timer guarda la sua <a href="../timer/">pagina di documentazione qua</a>.</p>
<p>Dando per scontato il funzionamento di base, dobbiamo impostare il periodo di ripetizione del timer tale da generare un segnale a <span class="arithmatex">\(800\text{kHz}\)</span>, che da adesso chiameremo <span class="arithmatex">\(f_{PWM}\)</span> quindi avremo bisogno di sapere la frequenza di lavoro del timer in questione (aprendo il datasheet e navigando al block diagram del microcontrollore o aprendo <a href="../../stm32h723zg-block-diagram.pdf">questo file qua</a>).</p>
<p>Troviamo quindi a quale dominio il nostro timer appartiene, ad esempio <strong>APB2</strong>. Adesso andiamo nella "clock configuration" dell'ioc e cerchiamo a quale frequenza lavora il corrispondente dominio.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
</div>
<p>Questa sarà la frequenza in ingresso al timer <span class="arithmatex">\(f_{tim}\)</span></p>
<h3 id="calcolo-dellarr">Calcolo dell'ARR</h3>
<p>Dobbiamo configurare il timer in modo da ottenere la <span class="arithmatex">\(f_{PWM}\)</span> corretta. Per farlo dobbiamo trovare il valore del registro <span class="arithmatex">\(ARR\)</span> che consente questa divisione. Per trovarlo faremo quindi:</p>
<p><span class="arithmatex">\(<span class="arithmatex">\(ARR = \frac{f_{tim}}{f_{PWM}} - 1\)</span>\)</span>
Possiamo inserire solo numeri interi, quindi nel caso in cui non venga un rapporto intero si può approssimare.</p>
<h3 id="calcolo-dutycycle-bit">Calcolo DutyCycle bit</h3>
<p>Non resta che calcolare quanto deve valere il duty cycle per indicare il valore 0 e 1. Per farlo dobbiamo capire l'intervallo di tempo che il segnale generato dal timer rimanga alto e quanto basso. </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Questo parametro specialmente è dipendente dal tipo di neopixel usato, quindi è sempre meglio controllare sul datasheet</p>
</div>
<p>Nel caso dei WS2812B-4020, abbiamo da rispettare questa <em>chiarissima</em> temporizzazione che si traduce nel fatto che per indicare uno <span class="arithmatex">\(ZERO\)</span> dobbiamo tenere il segnale alto per <span class="arithmatex">\(1/4\)</span> del periodo, mentre per indicare un <span class="arithmatex">\(UNO\)</span> dobbiamo stare intorno ai <span class="arithmatex">\(3/4\)</span> del periodo. Sperimentalmente si può provare diversi valori e spesso vale anche che lo <span class="arithmatex">\(ZERO\)</span> si ha quando il segnale è alto per <span class="arithmatex">\(1/3\)</span> e l'<span class="arithmatex">\(UNO\)</span> quando è alto per <span class="arithmatex">\(2/3\)</span>
<img align="right," alt="alt text" src="../neopixel-pwm-code-period.png" width="400" /></p>
<p>In ogni caso, dobbiamo capire come indicare al timer come impostare queste frazioni del periodo, per farlo dobbiamo impostare il valore nel registro <em>pulse</em>, o meglio, <em>dovremmo farlo</em> in quanto di questa operazione se ne occuperà il DMA e un nostro metodo incaricato di convertire la parola da 8bit in 8 parole da 16bit per il buffer da mandare al DMA.</p>
<p>Quindi:
<span class="arithmatex">\(<span class="arithmatex">\(\begin{align}ZERO = (ARR+1) \cdot 1/4 \\ UNO = (ARR+1) \cdot 3/4\end{align}\)</span>\)</span></p>
<p>Anche in questo caso è probabile che non si ottengano dei valori interi, per fortuna i neopixel non sono così fiscali con le temporizzazioni e quindi è possibile arrotondare all'intero più vicino senza che i simboli vengano fraintesi.</p>
<h2 id="implementazione-codice">Implementazione Codice</h2>
<p>TODO: spiegone</p>
<h2 id="ws2812b">WS2812b</h2>
<p>Sulla scheda abbiamo a disposizione 12 led rgb disposti a cerchio sul diametro esterno. Se la scheda viene operata senza la rossa, allora i led a disposizione sono solo 2.
Pertanto le notifiche più vitali sono riportate sui primi 2 led.</p>
<p>A seconda del pattern di lampeggio e dei colori abbiamo messaggi diversi:</p>
<ul>
<li>Tutti i led sfumano dal rosso allo spento ogni secondo -&gt; Procedura di cancellazione della flash in corso</li>
<li>Rapido lampaggio on off rosso -&gt; 
  TODO: tabella con spiegazione degli errori</li>
</ul>
<h2 id="teoria-sui-led-indirizzabili">Teoria sui led indirizzabili</h2>
<p>Prendono in ingresso un segnale pwm che rappresenta l'<code>1</code> o lo <code>0</code> logico a seconda della lunghezza della durata della parte alta del segnale. Il periodo del segnale PWM deve essere di <span class="arithmatex">\(1.25 \mu s\)</span>.</p>
<p>Per i led che usiamo noi abbiamo che lo <code>0</code> logico corrisponde ad un "on time" di <span class="arithmatex">\(0,4\mu s\)</span>. Mentre l'<code>1</code> vuole un "on time" di <span class="arithmatex">\(0,8\mu s\)</span>.</p>
<h2 id="come-configurare-il-progetto-per-avere-i-led-funzionanti">Come configurare il progetto per avere i led funzionanti:</h2>
<p>Si può usare sia il timer 8 che il timer 3. In entrambi i casi il canale è l'<strong>1</strong></p>
<h3 id="impostare-il-timer">Impostare il timer</h3>
<p>Supponendo di aver settato il clock ad una frequenza di <span class="arithmatex">\(f_{clk}=100Mhz\)</span>.
Dobbiamo andare a impostare l'AutoReloadRegister (ARR) in modo da ottenere il periodo da noi desiderato, quindi diremo che <span class="arithmatex">\(<span class="arithmatex">\(ARR - 1 = \frac{f_{clk}}{f_{led}} = \frac{100MHz}{(1,25 \mu s)^{-1}} = \frac{100MHz}{800kHz} = 125 -1\)</span>\)</span> (nota che il -1 è dovuto al fatto che nell'ioc devi mettere 124)</p>
<p>A questo punto non resta che controllare che il registro "pulse" del canale corretto sia uguale a 0.</p>
<p>Ricorda di abilitare lo stream DMA in memory to peripheral</p>
<h3 id="assegnare-i-valori-corretti-ai-bit">Assegnare i valori corretti ai bit</h3>
<p>Come detto prima lo 0 e l'1 logici corrispondono a dei duty cycle. Calcoliamoli:
lo <code>0</code> corrisponde ad un duty cycle di <span class="arithmatex">\(1/3\)</span>, quindi <span class="arithmatex">\(\frac{125}{3} \approx 42\)</span>. Mentre l'<code>1</code> corrisponde a <span class="arithmatex">\(84\)</span>. Questi valori vanno impostati per la funzione che converte il valore da uint8 a valori del pwm da mettere nell'array che viene dato in pasto al DMA </p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2025 Red Propulsion
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://instagram.com/red_propulsion/" target="_blank" rel="noopener" title="instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.tabs", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.tabs", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>